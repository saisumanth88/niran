tcdwdq1zatcrh   - hostname
cwhdqdev -  DBNAME
Backup policy
Maintainence window
external tables
DBlink
cron job details and scheduler jobs
OEM agent


SQL> select 'create DATABASE LINK '||NAME|| ' connect to '|| userid || ' identified by '|| password || ' using '||''''|| host ||''''||'; ' FROM sys.link$;

'CREATEDATABASELINK'||NAME||'CONNECTTO'||USERID||'IDENTIFIEDBY'||PASSWORD||'USIN
--------------------------------------------------------------------------------
create DATABASE LINK DQ_PRD_ARC connect to DQ_ARCHIVE identified by  using 'CWHD
QPRD';

create DATABASE LINK GISMAP.VODACOM.CO.ZA connect to DNDIRECT_USER identified by
  using 'gispware';

create DATABASE LINK STAGING_QA connect to DQ_STAGING identified by  using 'cwhd
qqa';

create DATABASE LINK STAGING_TRAIN connect to DQ_STAGING identified by  using 'c
whdqton';

'CREATEDATABASELINK'||NAME||'CONNECTTO'||USERID||'IDENTIFIEDBY'||PASSWORD||'USIN
--------------------------------------------------------------------------------

create DATABASE LINK DQ_ARCHQA connect to DQ_ARCHIVE identified by  using 'cwhdq
qa';

create DATABASE LINK PRD_LNK connect to DQ_READ_ONLY identified by  using 'cwhdq
prd';

create DATABASE LINK REMEDY_RO connect to CM_EDQ identified by  using 'remedy_ro
';

create DATABASE LINK DC3DMIG connect to DMABI identified by  using 'dc3dmig';

'CREATEDATABASELINK'||NAME||'CONNECTTO'||USERID||'IDENTIFIEDBY'||PASSWORD||'USIN
--------------------------------------------------------------------------------
create DATABASE LINK DCDWODI.VODACOM.CORP connect to USER_DODI identified by  us
ing 'DCDWODI';


9 rows selected.


DEV1_EDQ_CONF
DEV1_EDQ_CONFTEMP
DEV1_EDQ_RES
DEV1_EDQ_RESTEMP
DEV_EDQ_CONF
DEV_EDQ_CONFTEMP
DEV_EDQ_RES
DEV_EDQ_RESTEMP
DEV_EDQ_STAGING
DEV_EDQ_STAGINGTEMP
DEV_IAS_TEMP
DEV_IAS_UMS
DEV_IAU
DEV_MDS
DEV_STB
DEV_WLS
DQDEV_EDQ_CONF
DQDEV_EDQ_CONFTEMP
DQDEV_EDQ_RES
DQDEV_EDQ_RESTEMP
DQDEV_EDQ_STAGING
DQDEV_EDQ_STAGINGTEMP
DQDEV_IAS_OPSS
DQDEV_IAS_TEMP
DQDEV_IAS_UMS
DQDEV_IAU
DQDEV_MDS
DQDEV_STB
DQDEV_WLS
DQ_ARM_DATA
DQ_CM
DQ_OTHER_DATA
DQ_SIEBEL_DATA
DQ_STAGING_DATA
EDQDEV_EDQ_CONF
EDQDEV_EDQ_CONFTEMP
EDQDEV_EDQ_RES
EDQDEV_EDQ_RESTEMP
EDQDEV_EDQ_RES_2
EDQDEV_EDQ_STAGING
EDQDEV_EDQ_STAGINGTEMP
EDQDEV_IAS_OPSS
EDQDEV_IAS_TEMP
EDQDEV_IAS_UMS
EDQDEV_IAU
EDQDEV_MDS
EDQDEV_STB
EDQDEV_WLS
IDM_DATA
KYLE_TEST
SANDY
SYSAUX
SYSTEM
TEMP
TEMP_APP
TEMP_USERS_02
UNDOTBS2
USERS
USER_DEMO

BIG TB:

DQ_STAGING_DATA
EDQDEV_WLS
UNDOTBS2
EDQDEV_EDQ_RES_2
USER_DEMO
DQ_CM
IDM_DATA
EDQDEV_EDQ_STAGING
EDQDEV_EDQ_CONFTEMP
EDQDEV_STB
EDQDEV_IAS_TEMP
EDQDEV_EDQ_STAGINGTEMP
EDQDEV_IAS_OPSS
EDQDEV_EDQ_RES
EDQDEV_IAS_UMS
EDQDEV_IAU
EDQDEV_EDQ_RESTEMP
EDQDEV_EDQ_CONF
EDQDEV_MDS
KYLE_TEST

Small TB:

SANDY
DQ_ARM_DATA
DQDEV_IAU
DQDEV_STB
DQDEV_IAS_OPSS
DQDEV_IAS_UMS
DQDEV_EDQ_RESTEMP
DQDEV_EDQ_CONF
DQDEV_EDQ_STAGINGTEMP
DQDEV_EDQ_STAGING
DQDEV_MDS
DQDEV_IAS_TEMP
DQDEV_WLS
DQDEV_EDQ_RES
DQDEV_EDQ_CONFTEMP
DQ_OTHER_DATA
DEV1_EDQ_RESTEMP
DEV1_EDQ_RES
DEV1_EDQ_CONF
TEMP_APP
TEMP_USERS_02
DQ_SIEBEL_DATA
DEV_IAS_UMS
DEV_EDQ_CONF
DEV_EDQ_STAGING
DEV_EDQ_RESTEMP
DEV_EDQ_STAGINGTEMP
DEV_EDQ_CONFTEMP
DEV_IAS_TEMP
DEV_EDQ_RES
DEV_STB
DEV_WLS
DEV_MDS
DEV_IAU
DEV1_EDQ_CONFTEMP

TB Creation :

CREATE TABLESPACE	SANDY	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQ_ARM_DATA	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_IAU	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_STB	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_IAS_OPSS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_IAS_UMS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_RESTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_CONF	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_STAGINGTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_STAGING	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_MDS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_IAS_TEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_WLS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_RES	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQDEV_EDQ_CONFTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQ_OTHER_DATA	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV1_EDQ_RESTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV1_EDQ_RES	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV1_EDQ_CONF	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	TEMP_APP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	TEMP_USERS_02	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DQ_SIEBEL_DATA	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_IAS_UMS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_CONF	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_STAGING	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_RESTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_STAGINGTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_CONFTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_IAS_TEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_EDQ_RES	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_STB	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_WLS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_MDS	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV_IAU	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;
CREATE TABLESPACE	DEV1_EDQ_CONFTEMP	DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxsize unlimited;


CREATE BIGFILE TABLESPACE DQ_STAGING_DATA DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_WLS DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE UNDOTBS2 DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_RES_2 DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE USER_DEMO DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE DQ_CM DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE IDM_DATA DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_STAGING DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_CONFTEMP DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_STB DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_IAS_TEMP DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_STAGINGTEMP DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_IAS_OPSS DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_RES DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_IAS_UMS DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_IAU DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_RESTEMP DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_EDQ_CONF DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE EDQDEV_MDS DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;
CREATE BIGFILE TABLESPACE KYLE_TEST DATAFILE SIZE 5G AUTOEXTEND ON NEXT 5G maxmize unlimited;


SELECT DBMS_METADATA.GET_DDL('FUNCTION','VODACOM_PVF_2019_SYSTEM') FROM dual;		 

begin
    rdsadmin.rdsadmin_password_verify.create_verify_function(
        p_verify_function_name            => 'VODACOM_PVF_2019_SYSTEM', 
        p_min_length                      => 16,
		p_min_letters                     => 1,
		p_min_different_chars             => 4,
		p_min_lowercase					  => 1,
		p_min_uppercase					  => 1,
		p_min_special					  => 1,
		p_disallow_username               => True,
		p_disallow_reverse                => True,
		p_disallow_db_name                => True,
		p_disallow_simple_strings         => True,
        p_min_digits                      => 1);
end;
/

profiles:
ORA_STIG_PROFILE
VODA_RAP
VODA_COMPLIANT
VODA_NONEXPIRY
ORA_LAX
VODA_RESET


select dbms_metadata.get_ddl('PROFILE','VODA_COMPLIANT') from dual;
select dbms_metadata.get_ddl('PROFILE','VODA_NONEXPIRY') from dual;
select dbms_metadata.get_ddl('PROFILE','VODA_RAP') from dual;
select dbms_metadata.get_ddl('PROFILE','VODA_RESET') from dual;
select dbms_metadata.get_ddl('PROFILE','ORA_LAX') from dual;



   CREATE PROFILE "VODA_COMPLIANT"
    LIMIT 
         COMPOSITE_LIMIT DEFAULT 
         SESSIONS_PER_USER 16 
         CPU_PER_SESSION DEFAULT 
         CPU_PER_CALL DEFAULT 
         LOGICAL_READS_PER_SESSION DEFAULT 
         LOGICAL_READS_PER_CALL DEFAULT 
         IDLE_TIME 540 
         CONNECT_TIME DEFAULT 
         PRIVATE_SGA DEFAULT 
         FAILED_LOGIN_ATTEMPTS 5 
         PASSWORD_LIFE_TIME 7776000/86400 
         PASSWORD_REUSE_TIME 31536000/86400 
         PASSWORD_REUSE_MAX 6 
         PASSWORD_VERIFY_FUNCTION "VODACOM_PVF_2019" 
         PASSWORD_LOCK_TIME UNLIMITED 
         PASSWORD_GRACE_TIME 432000/86400 ;
		 
  

   CREATE PROFILE "VODA_NONEXPIRY"
    LIMIT 
         COMPOSITE_LIMIT UNLIMITED 
         SESSIONS_PER_USER UNLIMITED 
         CPU_PER_SESSION UNLIMITED 
         CPU_PER_CALL UNLIMITED 
         LOGICAL_READS_PER_SESSION UNLIMITED 
         LOGICAL_READS_PER_CALL UNLIMITED 
         IDLE_TIME UNLIMITED 
         CONNECT_TIME UNLIMITED 
         PRIVATE_SGA UNLIMITED 
         FAILED_LOGIN_ATTEMPTS 5 
         PASSWORD_LIFE_TIME 31536000/86400 
         PASSWORD_REUSE_TIME 31536000/86400 
         PASSWORD_REUSE_MAX 6 
         PASSWORD_VERIFY_FUNCTION "VODACOM_PVF_2019_SYSTEM" 
         PASSWORD_LOCK_TIME UNLIMITED 
         PASSWORD_GRACE_TIME UNLIMITED l;
	
  
   CREATE PROFILE "VODA_RAP"
    LIMIT 
         COMPOSITE_LIMIT DEFAULT 
         SESSIONS_PER_USER DEFAULT 
         CPU_PER_SESSION DEFAULT 
         CPU_PER_CALL DEFAULT 
         LOGICAL_READS_PER_SESSION DEFAULT 
         LOGICAL_READS_PER_CALL DEFAULT 
         IDLE_TIME DEFAULT 
         CONNECT_TIME DEFAULT 
         PRIVATE_SGA DEFAULT 
         FAILED_LOGIN_ATTEMPTS 5 
         PASSWORD_LIFE_TIME UNLIMITED 
         PASSWORD_REUSE_TIME 31536000/86400 
         PASSWORD_REUSE_MAX 6 
         PASSWORD_VERIFY_FUNCTION "VODACOM_PVF_2019_SYSTEM" 
         PASSWORD_LOCK_TIME UNLIMITED 
         PASSWORD_GRACE_TIME UNLIMITED ;

  
   CREATE PROFILE "VODA_RESET"
    LIMIT 
         COMPOSITE_LIMIT UNLIMITED 
         SESSIONS_PER_USER UNLIMITED 
         CPU_PER_SESSION UNLIMITED 
         CPU_PER_CALL UNLIMITED 
         LOGICAL_READS_PER_SESSION DEFAULT 
         LOGICAL_READS_PER_CALL DEFAULT 
         IDLE_TIME UNLIMITED 
         CONNECT_TIME UNLIMITED 
         PRIVATE_SGA UNLIMITED 
         FAILED_LOGIN_ATTEMPTS UNLIMITED 
         PASSWORD_LIFE_TIME UNLIMITED 
         PASSWORD_REUSE_TIME UNLIMITED 
         PASSWORD_REUSE_MAX UNLIMITED 
         PASSWORD_VERIFY_FUNCTION NULL 
         PASSWORD_LOCK_TIME UNLIMITED 
         PASSWORD_GRACE_TIME UNLIMITED ;
   
   
   CREATE PROFILE "ORA_LAX"
    LIMIT 
         COMPOSITE_LIMIT DEFAULT 
         SESSIONS_PER_USER UNLIMITED 
         CPU_PER_SESSION DEFAULT 
         CPU_PER_CALL DEFAULT 
         LOGICAL_READS_PER_SESSION DEFAULT 
         LOGICAL_READS_PER_CALL DEFAULT 
         IDLE_TIME DEFAULT 
         CONNECT_TIME DEFAULT 
         PRIVATE_SGA DEFAULT 
         FAILED_LOGIN_ATTEMPTS DEFAULT 
         PASSWORD_LIFE_TIME UNLIMITED 
         PASSWORD_REUSE_TIME UNLIMITED 
         PASSWORD_REUSE_MAX UNLIMITED 
         PASSWORD_VERIFY_FUNCTION NULL 
         PASSWORD_LOCK_TIME DEFAULT 
         PASSWORD_GRACE_TIME UNLIMITED ;
  
     



Export command:
expdp \"/ as sysdba\"  dumpfile=dir_name:EDW_EXPDP_FULL_%U.dmp logfile=rds_mig:EDW_EXPDP_FULL_Date.log 
flashback_scn=******* parallel=** full=y metrics=y EXCLUDE=STATISTICS EXCLUDE=INDEXES compression=all cluster=n

Transfer files:
using script:

impdp admin/************@EDWDEV DIRECTORY=DATA_PUMP_DIR dumpfile=EDW_EXPDP_FULL_%U.dmp parallel=** 
logfile=EDW_IMPDP_FULL_Date.log metrics=y transform=disable_archive_logging:Y







spool EDW_DB_Output.txt
set head on;
set veri on;
set feed on;
set echo on;
set verify on;
set term on;
set long 99999;
!hostname;date;
select name from v$database;
select * from v$version;
select distinct username from dba_users;
select distinct tablespace_name from dba_tablespaces;
select distinct profile from dba_profiles;
select tablespace_name,bigfile from dba_tablespaces;
SELECT 'SELECT DBMS_METADATA.GET_DDL(''TABLESPACE'','''||  TABLESPACE_NAME || ''') FROM DUAL;' FROM DBA_TABLESPACES;
select sum(bytes/1024/1024/1024) as GB from dba_segments;
col owner format a5;
col table_name format a20;
col location format a20;
col dir format a20;
col DIRECTORY_NAME format a20;
select * from dba_external_locations; 
select 'create DATABASE LINK '||NAME|| ' connect to '|| userid || ' identified by '|| password || ' using '||''''|| host ||''''||'; ' FROM sys.link$;
select DIRECTORY_NAME from dba_directories;
select 'GRANT '  || PRIVILEGE || ' ON ' || owner||'.'||TABLE_name|| ' TO ' ||role||';' from role_tab_privs where ROLE in ('DQ_STAGING');
select 'GRANT ' || GRANTED_ROLE||' TO ' ||GRANTEE||';' from dba_role_privs where GRANTEE in ('DQ_STAGING'); 
select 'GRANT '  || PRIVILEGE || ' ON ' || owner||'.'||TABLE_name|| ' TO ' ||grantee||';' from DBA_TAB_PRIVS where grantee in ('DQ_STAGING');
select 'GRANT '  || PRIVILEGE || ' ON ' || owner||'.'||TABLE_name|| ' TO ' ||grantee||';' from DBA_TAB_PRIVS where owner  in ('DQ_STAGING');
select count(*) from recyclebin;
set pages 1000;
set lines 1000;
col username format a20;
col default_tablespace format a20;
col temporary_tablespace format a30;
col profile format a30;
col RESOURCE_NAME format a30;
col LIMIT format a40;
select username,default_tablespace,temporary_tablespace,profile from dba_users where username in ('DQ_STAGING');
col owner format a20;
select owner, sum(bytes/1024/1024/1024) from dba_segments  group by owner;
select RESOURCE_NAME,LIMIT from dba_profiles where profile='VODA_NONEXPIRY';
spool off;







